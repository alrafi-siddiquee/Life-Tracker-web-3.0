<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Life Tracker ‚Äì Mindful Living</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet" />
<style>
  :root {
    --primary: #4a6fa5;
    --secondary: #166088;
    --accent: #4fc3a1;
    --danger: #d64045;
    --light: #f8f9fa;
    --dark: #343a40;
    --morning: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
    --afternoon: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%);
    --evening: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    --night: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
  }
  *, *::before, *::after {
    box-sizing: border-box;
    margin: 0; padding: 0;
  }
  body {
    font-family: "Poppins", sans-serif;
    line-height: 1.6;
    background: var(--morning);
    min-height: 100vh;
    transition: background 0.4s;
    color: var(--dark);
  }
  h1,h2,h3 {
    font-weight: 600;
    color: var(--secondary);
    margin-bottom: 0.6rem;
  }
  button {
    cursor: pointer;
    font-family: inherit;
  }
  header {
    background: rgba(52, 58, 64, 0.9);
    color: #fff;
    text-align: center;
    padding: 2.4rem 1rem 1rem;
    position: relative;
    user-select: none;
  }
  .heartbeat {
    font-size: 2.2rem;
    position: absolute;
    left: 16px;
    top: 18px;
    animation: beat 1s infinite alternate;
  }
  @keyframes beat {
    to { transform: scale(1.15); }
  }
  .subtitle {
    color: var(--accent);
    margin-top: 0.3rem;
    font-weight: 400;
    font-size: 1.05rem;
  }
  .time-showcase {
    margin-top: 0.8rem;
    color: #ffeb3b;
    letter-spacing: 0.12em;
    font-size: 1rem;
    font-weight: 600;
  }
  .container {
    max-width: 700px;
    margin: 2.4rem auto;
    background: rgba(255, 255, 255, 0.96);
    padding: 1.5rem;
    border-radius: 12px;
    box-shadow: 0 2px 18px #afbdd580;
  }
  .form-group {
    margin-bottom: 1.2rem;
  }
  label {
    display: block;
    font-weight: 600;
    margin-bottom: 0.3rem;
    color: var(--secondary);
    user-select: none;
  }
  input[type="text"],
  input[type="date"],
  input[type="datetime-local"],
  input[type="number"],
  input[type="time"] {
    width: 100%;
    padding: 0.6rem;
    border: 1px solid #b1b1b1;
    border-radius: 6px;
    font-size: 1rem;
    background: var(--light);
    transition: border-color 0.2s;
  }
  input[type="text"]:focus,
  input[type="date"]:focus,
  input[type="datetime-local"]:focus,
  input[type="number"]:focus,
  input[type="time"]:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 5px var(--accent);
    background: #fff;
  }
  button,
  .nav-button {
    background: var(--primary);
    color: #fff;
    font-weight: 600;
    border: none;
    border-radius: 8px;
    font-size: 1rem;
    padding: 0.68rem 1.35rem;
    margin: 0.22rem 0.4rem 0.22rem 0;
    transition: background 0.2s, color 0.2s;
    user-select: none;
  }
  button:hover,
  .nav-button:hover {
    background: var(--secondary);
  }
  .nav-buttons {
    text-align: center;
    margin-bottom: 1.3rem;
    user-select: none;
  }
  .nav-button {
    display: inline-block;
  }
  #reset-btn {
    background: var(--danger);
    color: white;
    font-weight: 700;
    border-radius: 8px;
    padding: 0.68rem 1.35rem;
    border: none;
    margin-left: 1rem;
    transition: background 0.3s;
    user-select: none;
  }
  #reset-btn:hover {
    background: #a72f33;
  }
  .dashboard-section {
    display: none;
  }
  .dashboard-section.active {
    display: block;
  }
  .quote-marquee {
    background: #f6f9fa;
    color: #455a64;
    font-style: italic;
    font-size: 0.95rem;
    padding: 0.6rem 1rem;
    margin-bottom: 1.6rem;
    border-radius: 8px;
    overflow: hidden;
    border-left: 6px solid var(--accent);
    user-select: none;
  }
  .marquee-content {
    display: inline-block;
    white-space: nowrap;
    min-width: 100%;
    animation: marquee 34s linear infinite;
  }
  @keyframes marquee {
    from { transform: translateX(0); }
    to { transform: translateX(-80%); }
  }
  .visual-countdown {
    display: flex;
    justify-content: center;
    margin: 1.3rem 0;
  }
  .countdown-circle {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    background: conic-gradient(var(--accent) 0%, var(--secondary) 0%);
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 15px #4fc3a145;
    user-select: none;
  }
  .countdown-inner {
    background: #fff;
    width: 90px;
    height: 90px;
    border-radius: 50%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    box-shadow: 0 1px 8px #afbdd570;
  }
  .countdown-percent {
    font-size: 1.3rem;
    font-weight: 700;
    color: var(--primary);
    user-select: none;
  }
  .countdown-label {
    font-size: 0.9rem;
    color: #666;
    margin-top: 0.25rem;
    user-select: none;
  }
  .stats-container {
    display: flex;
    flex-wrap: wrap;
    gap: 1.3rem;
    justify-content: space-between;
  }
  .stat-card {
    background: #f1f6fa;
    border-radius: 9px;
    flex: 1 1 135px;
    padding: 1rem 1.1rem;
    box-shadow: 0 1px 4px #acd0ea45;
    margin-bottom: 1rem;
    user-select: none;
  }
  .stat-card h3 {
    font-size: 1.06rem;
    margin-bottom: 0.65rem;
  }
  .stat-value {
    font-size: 1.4rem;
    font-weight: 700;
    color: var(--secondary);
    letter-spacing: 0.02em;
  }
  .seconds-counter {
    font-size: 1rem;
    color: #666;
    margin-top: 0.28rem;
    font-weight: 600;
  }
  .highlight {
    background: #e2faee;
    color: #158665;
    border-radius: 6px;
    padding: 0.9rem 1.1rem;
    text-align: center;
    font-weight: 600;
    font-size: 1.1rem;
    margin: 1rem 0;
    user-select: none;
  }
  .progress-container {
    background: #ececec;
    height: 11px;
    border-radius: 7px;
    margin-top: 0.25rem;
    width: 100%;
  }
  .progress-bar {
    background: var(--accent);
    height: 100%;
    border-radius: 7px;
    width: 0;
    transition: width 0.35s ease-out;
  }

  /* Daily Tracker */
  #daily-tracker .time-tracker-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
  }
  #daily-tracker .time-tracker-grid > div {
    flex: 1 1 200px;
  }
  #daily-tracker .time-allocation {
    margin-top: 1rem;
  }
  #daily-tracker .time-category {
    display: flex;
    align-items: center;
    margin-bottom: 0.5rem;
  }
  #daily-tracker .time-color {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    display: inline-block;
    margin-right: 10px;
  }
  #daily-tracker .time-label {
    min-width: 110px;
  }
  #daily-tracker .time-bar {
    flex: 1;
    background: #ececec;
    border-radius: 7px;
    height: 12px;
    margin: 0 10px;
    position: relative;
  }
  #daily-tracker .time-fill {
    height: 100%;
    border-radius: 7px;
    width: 0;
  }
  #daily-countdown-live {
    font-weight: 600;
    font-size: 1rem;
    color: var(--secondary);
    margin-top: 0.5rem;
    user-select: none;
  }

  /* Life Goals */
  #life-goals .goals-list {
    list-style: none;
    padding-left: 0;
    margin-top: 1rem;
  }
  #life-goals .goal-item {
    background: #f5fcff;
    border: 1.5px solid #ececec;
    border-radius: 7px;
    padding: 10px 15px;
    margin-bottom: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  #life-goals .goal-item.completed {
    background: #d4f5e2;
    color: #2b7a4b;
    text-decoration: line-through;
  }
  #life-goals .goal-info {
    flex: 1 1 80%;
  }
  #life-goals .goal-title {
    font-weight: 600;
    font-size: 1.05rem;
    color: var(--primary);
  }
  #life-goals .goal-deadline {
    font-size: 0.9rem;
    color: #666;
  }
  #life-goals .goal-days-left {
    font-weight: 600;
    padding: 0.2rem 0.6rem;
    border-radius: 7px;
    font-size: 0.9rem;
    min-width: 110px;
    text-align: center;
  }
  #life-goals .goal-days-left.overdue {
    background: #ffeaea;
    color: var(--danger);
  }
  #life-goals .goal-actions button {
    background: none;
    border: none;
    font-size: 1.2rem;
    color: var(--primary);
    margin-left: 10px;
    cursor: pointer;
    transition: color 0.2s;
  }
  #life-goals .goal-actions button:hover {
    color: var(--danger);
  }
  #life-goals .goal-countdown {
    font-weight: 600;
    color: var(--secondary);
    font-size: 0.9rem;
    margin-top: 0.3rem;
    user-select: none;
  }

  /* Pomodoro */
  #pomodoro .pomodoro-container {
    display: flex;
    align-items: center;
    gap: 1.5rem;
    flex-wrap: wrap;
  }
  #pomodoro .pomodoro-timer {
    font-size: 2.8rem;
    font-weight: 700;
    width: 130px;
    text-align: center;
    padding: 12px 0;
    background: #fffbe5;
    color: var(--danger);
    border-radius: 10px;
    box-shadow: 0 1px 8px #ecd79c40;
    user-select: none;
  }
  #pomodoro .pomodoro-controls button {
    font-size: 1rem;
    margin-right: 0.8rem;
  }
  #pomodoro .pomodoro-cycles {
    font-size: 1.1rem;
    color: var(--secondary);
    user-select: none;
  }

  /* Money Management */
  #money-management label {
    font-weight: 600;
    margin-right: 0.5rem;
    user-select: none;
  }
  #money-management input[type=number], #money-management input[type=date] {
    border: 1px solid #b1b1b1;
    padding: 0.4rem 0.6rem;
    font-size: 1rem;
    border-radius: 6px;
    width: auto;
  }
  #money-management button {
    margin-left: 0.6rem;
  }
  #money-management table {
    width: 100%;
    max-width: 600px;
    border-collapse: collapse;
    margin-top: 0.8rem;
  }
  #money-management table th, #money-management table td {
    padding: 0.5rem 0.8rem;
    border: 1px solid #ddd;
  }
  #money-management table th {
    background: #f8f9fa;
    text-align: left;
  }
  #money-management table tfoot th {
    background: #e2faee;
  }
  #money-management table tfoot th:last-child {
    text-align: right;
  }
  #money-management #reset-money-month {
    margin-top: 0.6rem;
  }

  /* Social Media Tracking */
  #social-tracking table {
    width: 100%;
    max-width: 700px;
    border-collapse: collapse;
    margin-bottom: 1rem;
  }
  #social-tracking th, #social-tracking td {
    border: 1px solid #ddd;
    padding: 7px;
  }
  #social-tracking th {
    background: #f8f9fa;
  }
  #social-tracking tfoot th {
    background: #e2faee;
    text-align: center;
    font-weight: 600;
  }
  .social-mark, .social-delete {
    border: none;
    background: none;
    cursor: pointer;
    font-size: 1.15em;
  }
  .social-delete {
    color: #b22222;
  }
  .social-delete:hover {
    background: #ffeaea;
  }
  .social-mark[data-set="done"]:hover {
    background: #d9fce3;
  }
  .social-mark[data-set="fail"]:hover {
    background: #ffeaea;
  }

  @media (max-width: 770px) {
    .container {
      max-width: 95vw;
      margin: 1.5rem auto;
      padding: 1rem;
    }
    .stats-container {
      flex-direction: column;
      gap: 1rem;
    }
    .visual-countdown {
      margin: 1rem 0 1.5rem;
    }
    .nav-buttons {
      user-select: auto;
    }
    #daily-tracker .time-tracker-grid {
      flex-direction: column;
      gap: 1rem;
    }
    #pomodoro .pomodoro-container {
      flex-direction: column;
      gap: 1rem;
    }
  }
</style>
</head>
<body>
<header>
  <div class="heartbeat" aria-hidden="true">‚ù§Ô∏è</div>
  <h1>Life Tracker</h1>
  <p class="subtitle">Mindful Living Through Time Awareness</p>
  <div id="current-time" class="time-showcase" aria-live="polite" aria-atomic="true">
    Loading current time‚Ä¶
  </div>
</header>
<main class="container" role="main" aria-label="Life Tracker Application">

  <!-- User Input -->
  <section id="user-input-section" aria-label="User details input">
    <h2>Your Life Journey Begins Here</h2>
    <form id="life-form" novalidate>
      <div class="form-group">
        <label for="full-name">Full Name</label>
        <input id="full-name" type="text" autocomplete="name" required placeholder="Enter your full name" />
      </div>
      <div class="form-group">
        <label for="dob">Date of Birth</label>
        <input id="dob" type="date" required />
      </div>
      <div class="form-group">
        <label for="life-expectancy">Estimated Life Expectancy (years)</label>
        <input id="life-expectancy" type="number" value="70" min="50" max="120" required />
      </div>
      <button type="submit">Begin Tracking My Life</button>
    </form>
  </section>

  <!-- Dashboard -->
  <section id="dashboard" aria-label="Dashboard" style="display: none;">
    <div class="quote-marquee" aria-live="polite">
      <div class="marquee-content" aria-hidden="true">
        "The bad news is time flies. The good news is you're the pilot." ‚Äì Michael Altshuler ||
        ‚ÄúThere are two blessings which many people lose: (They are) Health and Free Time." ||
       "Don‚Äôt count every hour in the day, make every hour in the day count."||
        "Each moment is a pearl ‚Äì don‚Äôt drop it in the dust." üíé ||
        ‚ÄúWhoever does righteousness ‚Ä¶ We will surely cause him to live a good life.‚Äù ‚Äî Quran 16:97 ||
        " Take advantage of five before five..." ‚Äì Youth, Health, Wealth, Free Time, Life" ||
        "It‚Äôs not lack of time, it‚Äôs misuse of time." üïí||
      </div>
    </div>
    <nav class="nav-buttons" aria-label="Dashboard sections navigation" role="tablist">
      <button class="nav-button" data-section="life-progress" aria-controls="life-progress" aria-selected="true" role="tab" tabindex="0" type="button">Life Progress</button>
      <button class="nav-button" data-section="daily-tracker" aria-controls="daily-tracker" aria-selected="false" role="tab" tabindex="-1" type="button">Daily Tracker</button>
      <button class="nav-button" data-section="life-goals" aria-controls="life-goals" aria-selected="false" role="tab" tabindex="-1" type="button">Life Goals</button>
      <button class="nav-button" data-section="pomodoro" aria-controls="pomodoro" aria-selected="false" role="tab" tabindex="-1" type="button">Pomodoro Timer</button>
      <button class="nav-button" data-section="money-management" aria-controls="money-management" aria-selected="false" role="tab" tabindex="-1" type="button">Money Management</button>
      <button class="nav-button" data-section="social-tracking" aria-controls="social-tracking" aria-selected="false" role="tab" tabindex="-1" type="button">Social Media Tracking</button>
      <button id="reset-btn" type="button" aria-label="Reset all saved data">Reset All Data</button>
    </nav>

    <!-- Life Progress Section -->
    <section id="life-progress" class="dashboard-section active" role="tabpanel" tabindex="0" aria-live="polite">
      <!-- Same as styled and described above -->
      <h2>Your Life Progress</h2>
      <div class="visual-countdown" aria-hidden="true">
        <div id="countdown-circle" class="countdown-circle" aria-label="Life completion circle progress" role="img" aria-live="off">
          <div class="countdown-inner">
            <div id="countdown-percent" class="countdown-percent">0%</div>
            <div class="countdown-label">Life Completed</div>
          </div>
        </div>
      </div>
      <div class="stats-container">
        <div class="stat-card" aria-label="Time passed">
          <h3>Time Passed</h3>
          <div id="years-passed" class="stat-value">--</div><p>Years</p>
          <div id="months-passed" class="stat-value">--</div><p>Months</p>
          <div id="weeks-passed" class="stat-value">--</div><p>Weeks</p>
          <div id="days-passed" class="stat-value">--</div><p>Days</p>
          <div id="seconds-passed" class="seconds-counter">-- seconds</div>
        </div>
        <div class="stat-card" aria-label="Time remaining">
          <h3>Time Remaining</h3>
          <div id="years-remaining" class="stat-value">--</div><p>Years</p>
          <div id="months-remaining" class="stat-value">--</div><p>Months</p>
          <div id="weeks-remaining" class="stat-value">--</div><p>Weeks</p>
          <div id="days-remaining" class="stat-value">--</div><p>Days</p>
          <div id="seconds-remaining" class="seconds-counter">-- seconds</div>
        </div>
        <div class="stat-card" aria-label="Life completion percentage">
          <h3>Life Completion</h3>
          <div id="life-percentage" class="stat-value">--%</div>
          <div class="progress-container" aria-hidden="true"><div id="life-progress-bar" class="progress-bar"></div></div>
          <p>of your estimated lifespan</p>
        </div>
      </div>
      <div id="live-countdown" class="highlight" aria-live="polite" aria-atomic="true">Calculating your life countdown‚Ä¶</div>
    </section>

    <!-- Daily Tracker Section - with live countdown -->
    <section id="daily-tracker" class="dashboard-section" role="tabpanel" tabindex="0" hidden>
      <h2>Daily Time Tracker</h2>
      <div class="time-tracker-grid">
        <div>
          <div class="form-group">
            <label for="wake-up-time">Wake-up Time</label>
            <input type="time" id="wake-up-time" required />
          </div>
          <div class="form-group">
            <label for="sleep-time">Sleep Time</label>
            <input type="time" id="sleep-time" required />
          </div>
          <button id="calculate-day-btn">Calculate My Day</button>
          <div id="daily-live-countdown" class="highlight" aria-live="polite" aria-atomic="true" style="margin-top:0.7rem; color: var(--accent); font-weight:bold;"></div>
        </div>
        <div>
          <div class="stat-card">
            <h3>Sleep Duration</h3>
            <div id="sleep-duration" class="stat-value">--</div>
            <p>hours</p>
          </div>
          <div class="stat-card">
            <h3>Productive Hours Left</h3>
            <div id="productive-hours" class="stat-value">--</div>
            <p>hours</p>
          </div>
          <div id="day-countdown" class="highlight">Calculate your day to see time remaining</div>
        </div>
      </div>
      <div class="time-allocation">
        <div class="time-category">
          <span class="time-color" style="background: var(--primary)"></span>
          <span class="time-label">Sleep Time</span>
          <div class="time-bar"><div id="sleep-fill" class="time-fill" style="background: var(--primary)"></div></div>
        </div>
        <div class="time-category">
          <span class="time-color" style="background: var(--accent)"></span>
          <span class="time-label">Productive Time</span>
          <div class="time-bar"><div id="productive-fill" class="time-fill" style="background: var(--accent)"></div></div>
        </div>
        <div class="time-category">
          <span class="time-color" style="background: var(--danger)"></span>
          <span class="time-label">Time Passed</span>
          <div class="time-bar"><div id="passed-fill" class="time-fill" style="background: var(--danger)"></div></div>
        </div>
      </div>
    </section>

    <!-- Life Goals Section - with specific datetime and live countdown -->
    <section id="life-goals" class="dashboard-section" role="tabpanel" tabindex="0" hidden>
      <h2>Your Life Goals</h2>
      <div class="form-group">
        <label for="goal-title">Goal Title</label>
        <input id="goal-title" type="text" placeholder="What do you want to achieve?" />
      </div>
      <div class="form-group">
        <label for="goal-deadline">Target Finish Date and Time</label>
        <input type="datetime-local" id="goal-deadline" />
      </div>
      <button id="add-goal-btn">Add Goal</button>
      <ul id="goals-list" class="goals-list"></ul>
    </section>

    <!-- Pomodoro Timer Section -->
    <section id="pomodoro" class="dashboard-section" role="tabpanel" tabindex="0" hidden>
      <h2>Pomodoro Productivity Timer</h2>
      <div class="pomodoro-container">
        <div id="pomodoro-timer" class="pomodoro-timer">25:00</div>
        <div class="pomodoro-controls">
          <button id="start-pomodoro-btn">Start Work Session</button>
          <button id="start-break-btn">Start Break</button>
          <button id="reset-pomodoro-btn">Reset</button>
        </div>
        <div id="pomodoro-cycles" class="pomodoro-cycles">Completed Cycles: 0</div>
      </div>
      <div style="margin-top: 1.8rem;">
        <h3>How to Use the Pomodoro Technique</h3>
        <ol>
          <li>Work for 25 minutes (one Pomodoro)</li>
          <li>Take a 5-minute break</li>
          <li>After 4 Pomodoros, take a longer 15-30 minute break</li>
          <li>Repeat to maximize productivity</li>
        </ol>
      </div>
    </section>

    <!-- Money Management Section -->
    <section id="money-management" class="dashboard-section" role="tabpanel" tabindex="0" hidden>
      <h2>Money Management</h2>
      <div style="margin-bottom:1.2rem;">
        <label for="money-start">Monthly Starting Balance:</label>
        <input type="number" id="money-start" min="0" placeholder="e.g. 10000" style="width:120px;margin-right:1rem;">
        <button id="set-money-start">Set / Change Start Balance</button>
        <span id="money-start-info" style="margin-left:1.2rem;color:#158665;"></span>
      </div>
      <div style="margin-bottom:1.2rem;">
        <label for="money-date">Date:</label>
        <input type="date" id="money-date" style="width:140px;margin-right:1rem;">
        <label for="money-spent">Spent Today:</label>
        <input type="number" id="money-spent" min="0" placeholder="Amount" style="width:90px;">
        <button id="add-money-entry">Add</button>
      </div>
      <div>
        <h3 style="margin-top:1.1rem;">Your Money This Month</h3>
        <table style="width:100%;max-width:600px;margin-bottom:1.3rem;">
          <thead>
            <tr style="background:#f8f9fa;">
              <th style="text-align:left;">Date</th>
              <th style="text-align:right;">Spent</th>
            </tr>
          </thead>
          <tbody id="money-entries"></tbody>
          <tfoot>
            <tr style="background:#e2faee;">
              <th style="text-align:left;">Total Spent</th>
              <th style="text-align:right;" id="money-total-spent"></th>
            </tr>
            <tr style="background:#e2faee;">
              <th style="text-align:left;">Money Left</th>
              <th style="text-align:right;" id="money-total-left"></th>
            </tr>
          </tfoot>
        </table>
        <button id="reset-money-month" style="background:#d64045;">Reset Month</button>
      </div>
    </section>

    <!-- Social Media Tracking Section -->
    <section id="social-tracking" class="dashboard-section" role="tabpanel" tabindex="0" hidden>
      <h2>Social Media Tracking</h2>
      <form id="social-add-form" style="display:flex;flex-wrap:wrap;gap:0.7rem;align-items:center;margin-bottom:1.2rem;">
        <input id="social-name" type="text" required placeholder="Social Media Name" style="padding:0.6rem 1rem;border-radius:5px;border:1px solid #b1b1b1; font-size:1rem;">
        <label>From:</label>
        <input id="social-from" type="time" required style="width:110px;">
        <label>To:</label>
        <input id="social-to" type="time" required style="width:110px;">
        <button type="submit" style="margin-left:0.8rem;">Add</button>
      </form>
      <div style="margin-bottom:1.2rem;">
        <button id="social-prev-date">&#8592; Prev</button>
        <span id="social-date-label" style="font-weight:600;margin:0 1rem;">Today</span>
        <button id="social-next-date">&#8594; Next</button>
      </div>
      <div id="social-list-container">
        <table style="width:100%;max-width:700px;">
          <thead>
            <tr>
              <th>Platform</th>
              <th>Time Range</th>
              <th>Duration (min)</th>
              <th>Status</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody id="social-list"></tbody>
          <tfoot>
            <tr>
              <th colspan="2">Total</th>
              <th id="social-sum-min">0</th>
              <th colspan="2">
                <span id="social-success"></span>
                <span id="social-fail"></span>
                <span id="social-perc"></span>
              </th>
            </tr>
          </tfoot>
        </table>
      </div>
    </section>

  </section>

</main>

<footer style="position: fixed; left: 0; bottom: 0; width: 100%; text-align: center; background: #fff; padding: 8px 0; box-shadow: 0 -1px 8px rgba(0,0,0,0.03); font-size: 13px;">
  <p>Life Tracker ‚Äì Mindful Living</p>
  <p>¬© 2025 All Rights Reserved</p>
  <p>Planned by Alrafi Siddiquee Jim</p>
</footer>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const LS_KEYS = {
    user: "lt_user",
    goals: "lt_goals",
    day: "lt_day",
    pomodoro: "lt_pomo",
    money: "lt_money",
    social: "lt_social"
  };

  // Helper shortcuts
  const $ = selector => document.querySelector(selector);
  const $$ = selector => document.querySelectorAll(selector);
  const save = (key, val) => localStorage.setItem(key, JSON.stringify(val));
  const load = key => {
    try {
      return JSON.parse(localStorage.getItem(key)) || null;
    } catch { return null; }
  };

  // Clock & Background
  function updateClock() {
    const now = new Date();
    let h = now.getHours();
    let m = now.getMinutes().toString().padStart(2, "0");
    let s = now.getSeconds().toString().padStart(2, "0");
    const ampm = h >= 12 ? "PM" : "AM";
    h = h % 12 || 12;
    $("#current-time").textContent = `Current Time: ${h}:${m}:${s} ${ampm}`;
  }
  function updateBackground() {
    const h = new Date().getHours();
    if (h >= 5 && h < 12) document.body.style.background = "var(--morning)";
    else if (h >= 12 && h < 17) document.body.style.background = "var(--afternoon)";
    else if (h >= 17 && h < 21) document.body.style.background = "var(--evening)";
    else document.body.style.background = "var(--night)";
  }
  updateClock();
  updateBackground();
  setInterval(updateClock, 1000);
  setInterval(updateBackground, 60000);

  // Navigation Logic
  const navButtons = Array.from($$(".nav-button"));
  const dashboardSections = Array.from($$(".dashboard-section"));
  navButtons.forEach(btn => {
    btn.addEventListener("click", () => {
      dashboardSections.forEach(sec => {
        if (sec.id === btn.dataset.section) {
          sec.classList.add("active");
          sec.removeAttribute("hidden");
        } else {
          sec.classList.remove("active");
          sec.setAttribute("hidden", "");
        }
      });
      navButtons.forEach(b => {
        if (b === btn) {
          b.setAttribute("aria-selected", "true");
          b.setAttribute("tabindex", "0");
          b.focus();
        } else {
          b.setAttribute("aria-selected", "false");
          b.setAttribute("tabindex", "-1");
        }
      });
      if (btn.dataset.section === "money-management") renderMoney();
      else if (btn.dataset.section === "life-goals") renderGoals();
      else if (btn.dataset.section === "social-tracking") renderSocial(getToday());
    });
  });

  // User Input and Initialization
  const form = $("#life-form");
  const inputSection = $("#user-input-section");
  const dashboard = $("#dashboard");
  function startLifeStats(user) {
    if (window.lifeInterval) clearInterval(window.lifeInterval);
    const dob = new Date(user.dob);
    const lifeEnd = new Date(dob);
    lifeEnd.setFullYear(dob.getFullYear() + user.lifeExp);
    window.lifeInterval = setInterval(() => {
      const now = new Date();
      const ageMs = now - dob;
      const remMs = lifeEnd - now;
      const totalMs = lifeEnd - dob;
      const safeRemMs = remMs > 0 ? remMs : 0;

      const msY = 1000 * 60 * 60 * 24 * 365.25;
      const msM = msY / 12;
      const msW = 1000 * 60 * 60 * 24 * 7;
      const msD = 1000 * 60 * 60 * 24;

      const yearsPassed = Math.floor(ageMs / msY);
      const monthsPassed = Math.floor(ageMs / msM);
      const weeksPassed = Math.floor(ageMs / msW);
      const daysPassed = Math.floor(ageMs / msD);
      const secondsPassed = Math.floor(ageMs / 1000);

      const yearsRemaining = Math.floor(safeRemMs / msY);
      const monthsRemaining = Math.floor((safeRemMs / msM) % 12);
      const weeksRemaining = Math.floor((safeRemMs / msW) % 52);
      const daysRemaining = Math.floor((safeRemMs / msD) % 365);
      const secondsRemaining = Math.floor((safeRemMs / 1000) % 60);

      let lifePercent = (ageMs / totalMs) * 100;
      lifePercent = Math.min(100, Math.max(0, lifePercent)).toFixed(2);

      $("#years-passed").textContent = yearsPassed;
      $("#months-passed").textContent = monthsPassed;
      $("#weeks-passed").textContent = weeksPassed;
      $("#days-passed").textContent = daysPassed;
      $("#seconds-passed").textContent = secondsPassed + " seconds";

      $("#years-remaining").textContent = yearsRemaining;
      $("#months-remaining").textContent = monthsRemaining;
      $("#weeks-remaining").textContent = weeksRemaining;
      $("#days-remaining").textContent = daysRemaining;
      $("#seconds-remaining").textContent = secondsRemaining + " seconds";

      $("#life-percentage").textContent = lifePercent + "%";
      $("#life-progress-bar").style.width = lifePercent + "%";
      $("#countdown-percent").textContent = lifePercent + "%";
      $("#countdown-circle").style.background = `conic-gradient(var(--accent) ${lifePercent}%, var(--secondary) ${lifePercent}%)`;

      $("#live-countdown").innerHTML = `<strong>${yearsRemaining} years, ${monthsRemaining} months, ${weeksRemaining} weeks, ${daysRemaining} days, and ${secondsRemaining} seconds</strong> remaining. Make them count!`;
    }, 1000);
  }

  function initApp() {
    const user = load(LS_KEYS.user);
    if (user) {
      inputSection.style.display = "none";
      dashboard.style.display = "block";
      startLifeStats(user);
      navButtons[0].click(); // Show Life Progress tab by default
    } else {
      inputSection.style.display = "block";
      dashboard.style.display = "none";
    }
  }
  initApp();

  form.addEventListener("submit", e => {
    e.preventDefault();
    const name = $("#full-name").value.trim();
    const dob = $("#dob").value;
    const lifeExp = parseInt($("#life-expectancy").value);
    if (!name || !dob || !lifeExp || lifeExp < 50 || lifeExp > 120) {
      alert("Please fill out all fields correctly.");
      return;
    }
    save(LS_KEYS.user, { name, dob, lifeExp });
    inputSection.style.display = "none";
    dashboard.style.display = "block";
    startLifeStats({ name, dob, lifeExp });
    navButtons[0].click();
  });

  // Daily Tracker: calculate and live countdown
  const calcBtn = $("#calculate-day-btn");
  const dailyCountdownEl = document.createElement("div");
  dailyCountdownEl.id = "daily-countdown-live";
  calcBtn.parentElement.appendChild(dailyCountdownEl);

  function updateDailyCountdown(wakeUpTime, sleepTime) {
    if (!wakeUpTime || !sleepTime) {
      dailyCountdownEl.textContent = '';
      return;
    }
    const update = () => {
      const now = new Date();
      const [wh, wm] = wakeUpTime.split(":").map(Number);
      const [sh, sm] = sleepTime.split(":").map(Number);
      let wakeDate = new Date(now);
      wakeDate.setHours(wh, wm, 0, 0);
      let sleepDate = new Date(now);
      sleepDate.setHours(sh, sm, 0, 0);
      if (sleepDate <= wakeDate) sleepDate.setDate(sleepDate.getDate() + 1);

      let diffMs = sleepDate - now;
      if(diffMs < 0) diffMs = 0;

      const hrs = Math.floor(diffMs / 3600000);
      const mins = Math.floor((diffMs % 3600000) / 60000);
      const secs = Math.floor((diffMs % 60000) / 1000);
      dailyCountdownEl.textContent = `Time until sleep: ${hrs}h ${mins}m ${secs}s`;
    };
    update();
    clearInterval(window.dailyCountdownInterval);
    window.dailyCountdownInterval = setInterval(update, 1000);
  }

  calcBtn.onclick = () => {
    const wakeUp = $("#wake-up-time").value;
    const sleep = $("#sleep-time").value;
    if (!wakeUp || !sleep) {
      alert("Please enter wake-up and sleep times.");
      return;
    }
    save(LS_KEYS.day, { wakeUp, sleep });
    const now = new Date();
    const [wh, wm] = wakeUp.split(':').map(Number);
    const [sh, sm] = sleep.split(':').map(Number);
    const wakeDate = new Date(now);
    wakeDate.setHours(wh, wm, 0, 0);
    const sleepDate = new Date(now);
    sleepDate.setHours(sh, sm, 0, 0);
    if (sleepDate <= wakeDate) sleepDate.setDate(sleepDate.getDate() + 1);

    const sleepMs = wakeDate - sleepDate + 86400000;
    const sleepH = +(sleepMs / 3600000).toFixed(1);

    let productiveMs = sleepDate - now;
    if (productiveMs < 0) productiveMs += 86400000;
    const productiveH = +(productiveMs / 3600000).toFixed(1);

    let passedMs = now - wakeDate;
    if (passedMs < 0) passedMs += 86400000;
    const passedH = +(passedMs / 3600000).toFixed(1);

    const total = sleepH + productiveH + passedH;
    $("#sleep-duration").textContent = sleepH;
    $("#productive-hours").textContent = productiveH;

    $("#sleep-fill").style.width = (sleepH / total * 100) + '%';
    $("#productive-fill").style.width = (productiveH / total * 100) + '%';
    $("#passed-fill").style.width = (passedH / total * 100) + '%';

    updateDailyCountdown(wakeUp, sleep);
  };

  // Load daily tracker values if saved
  const savedDay = load(LS_KEYS.day);
  if (savedDay) {
    $("#wake-up-time").value = savedDay.wakeUp || "";
    $("#sleep-time").value = savedDay.sleep || "";
    updateDailyCountdown(savedDay.wakeUp, savedDay.sleep);
  }

  // Life Goals Logic with datetime-local countdown
  function loadGoals() {
    return load(LS_KEYS.goals) || [];
  }
  function saveGoals(goals) {
    save(LS_KEYS.goals, goals);
  }
  function renderGoals() {
    const goalsList = $("#goals-list");
    const goals = loadGoals();
    goalsList.innerHTML = "";
    goals.forEach((goal, idx) => {
      const deadline = new Date(goal.deadline);
      const now = new Date();
      const diffMs = deadline - now;
      const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));
      const diffHours = Math.floor((diffMs % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const diffMinutes = Math.floor((diffMs % (1000 * 60 * 60)) / (1000 * 60));

      const li = document.createElement("li");
      li.className = "goal-item" + (goal.completed ? " completed" : "");
      li.innerHTML = `
        <div class="goal-info">
          <div class="goal-title">${goal.title}</div>
          <div class="goal-deadline">Deadline: ${deadline.toLocaleString()}</div>
          <div class="goal-countdown" id="goal-countdown-${idx}"></div>
        </div>
        <div class="goal-days-left ${diffMs < 0 ? "overdue" : ""}">
          ${diffMs < 0 ? `Overdue by ${-diffDays} days` : `${diffDays} days left`}
        </div>
        <div class="goal-actions">
          <button class="complete-btn" title="${goal.completed ? "Undo Complete" : "Mark Complete"}">${goal.completed ? "üîÑ" : "‚úì"}</button>
          <button class="delete-btn" title="Delete Goal">‚úï</button>
        </div>
      `;
      goalsList.appendChild(li);

      const countdownEl = li.querySelector(`#goal-countdown-${idx}`);
      function updateCountdown() {
        const now = new Date();
        const diffMs = deadline - now;
        if (diffMs <= 0) {
          countdownEl.textContent = "Goal deadline reached!";
          clearInterval(intervalId);
          return;
        }
        const days = Math.floor(diffMs / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diffMs % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((diffMs % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((diffMs % (1000 * 60)) / 1000);
        countdownEl.textContent = `Time left: ${days}d ${hours}h ${minutes}m ${seconds}s`;
      }
      updateCountdown();
      const intervalId = setInterval(updateCountdown, 1000);

      // Event listeners for buttons
      li.querySelector(".complete-btn").onclick = () => {
        goal.completed = !goal.completed;
        saveGoals(goals);
        renderGoals();
      };
      li.querySelector(".delete-btn").onclick = () => {
        goals.splice(idx, 1);
        saveGoals(goals);
        renderGoals();
      };
    });
  }
  $("#add-goal-btn").onclick = () => {
    const title = $("#goal-title").value.trim();
    const deadline = $("#goal-deadline").value;
    if (!title || !deadline) {
      alert("Please fill in both goal title and deadline date/time.");
      return;
    }
    const goals = loadGoals();
    goals.push({ title, deadline, completed: false });
    saveGoals(goals);
    $("#goal-title").value = "";
    $("#goal-deadline").value = "";
    renderGoals();
  };
  renderGoals();

  // Pomodoro Timer Logic
  let pomoInterval = null;
  let pomoTimeLeft = 25 * 60;
  let pomoIsRunning = false;
  let pomoIsBreak = false;
  let pomoCycles = (load(LS_KEYS.pomodoro) || { cycles: 0 }).cycles || 0;
  function updatePomodoroDisplay() {
    const min = Math.floor(pomoTimeLeft / 60).toString().padStart(2, "0");
    const sec = (pomoTimeLeft % 60).toString().padStart(2, "0");
    $("#pomodoro-timer").textContent = `${min}:${sec}`;
    $("#pomodoro-cycles").textContent = `Completed Cycles: ${pomoCycles}`;
  }
  function savePomodoro() {
    save(LS_KEYS.pomodoro, { cycles: pomoCycles });
  }
  function startPomodoro(durationSeconds, breakSession) {
    clearInterval(pomoInterval);
    pomoTimeLeft = durationSeconds;
    pomoIsBreak = breakSession;
    pomoIsRunning = true;
    updatePomodoroDisplay();
    $("#live-countdown").textContent = pomoIsBreak ? "Break time! Relax and rest." : "Work session started! Focus.";
    pomoInterval = setInterval(() => {
      pomoTimeLeft--;
      updatePomodoroDisplay();
      if (pomoTimeLeft <= 0) {
        clearInterval(pomoInterval);
        pomoIsRunning = false;
        if (!pomoIsBreak) {
          pomoCycles++;
          savePomodoro();
          updatePomodoroDisplay();
          const nextBreakDuration = (pomoCycles % 4 === 0) ? 15 * 60 : 5 * 60;
          startPomodoro(nextBreakDuration, true);
        } else {
          $("#live-countdown").textContent = "Break over! Ready for another work session?";
        }
      }
    }, 1000);
  }
  $("#start-pomodoro-btn").onclick = () => { if (!pomoIsRunning || pomoIsBreak) startPomodoro(25 * 60, false); };
  $("#start-break-btn").onclick = () => { if (!pomoIsRunning || !pomoIsBreak) startPomodoro(5 * 60, true); };
  $("#reset-pomodoro-btn").onclick = () => {
    clearInterval(pomoInterval);
    pomoTimeLeft = 25 * 60;
    pomoIsRunning = false;
    pomoIsBreak = false;
    updatePomodoroDisplay();
    $("#live-countdown").textContent = "Pomodoro timer reset.";
  };
  updatePomodoroDisplay();

  // Money Management Logic
  function getMoneyData() {
    const d = load(LS_KEYS.money);
    const now = new Date();
    const ym = now.getFullYear() + "-" + String(now.getMonth() + 1).padStart(2, "0");
    if (!d || d.month !== ym) {
      return { month: ym, start: 0, entries: [] };
    }
    return d;
  }
  function saveMoneyData(d) {
    save(LS_KEYS.money, d);
  }
  function renderMoney() {
    const now = new Date();
    const todayStr = now.toISOString().slice(0, 10);
    const d = getMoneyData();
    $("#money-start").value = d.start || "";
    $("#money-date").value = todayStr;
    $("#money-start-info").textContent = d.start ? `Current Start: ${d.start}` : "";
    let tbody = "";
    let totalSpent = 0;
    d.entries.forEach(entry => {
      tbody += `<tr><td>${entry.date}</td><td style="text-align:right;">${entry.spent.toFixed(2)}</td></tr>`;
      totalSpent += Number(entry.spent || 0);
    });
    $("#money-entries").innerHTML = tbody;
    $("#money-total-spent").textContent = totalSpent.toFixed(2);
    $("#money-total-left").textContent = d.start ? (d.start - totalSpent).toFixed(2) : "";
    $("#reset-money-month").disabled = !d.start && !d.entries.length;
  }
  $("#set-money-start").onclick = () => {
    const val = parseFloat($("#money-start").value);
    if (isNaN(val) || val <= 0) {
      alert("Please enter a positive starting balance.");
      return;
    }
    const d = getMoneyData();
    d.start = val;
    d.entries = [];
    saveMoneyData(d);
    renderMoney();
  };
  $("#add-money-entry").onclick = () => {
    const date = $("#money-date").value;
    const spent = parseFloat($("#money-spent").value);
    if (!date || isNaN(spent) || spent < 0) {
      alert("Please enter a valid date and spent amount.");
      return;
    }
    const d = getMoneyData();
    const existing = d.entries.find(e => e.date === date);
    if (existing) {
      existing.spent += spent;
    } else {
      d.entries.push({ date, spent });
      d.entries.sort((a, b) => a.date.localeCompare(b.date));
    }
    saveMoneyData(d);
    $("#money-spent").value = "";
    renderMoney();
  };
  $("#reset-money-month").onclick = () => {
    if (confirm("Reset this month's money records? This cannot be undone.")) {
      const now = new Date();
      const ym = now.getFullYear() + "-" + String(now.getMonth() + 1).padStart(2, "0");
      saveMoneyData({ month: ym, start: 0, entries: [] });
      renderMoney();
    }
  };
  renderMoney();

  // Social Media Tracking Logic
  function getToday() {
    return (new Date()).toISOString().slice(0, 10);
  }
  function parseTime(str) {
    const [h, m] = str.split(":").map(Number);
    return h * 60 + m;
  }
  function getSocialData() {
    return load(LS_KEYS.social) || {};
  }
  function saveSocialData(obj) {
    save(LS_KEYS.social, obj);
  }
  let socialCurrentDate = getToday();
  function renderSocial(dateStr) {
    socialCurrentDate = dateStr || getToday();
    const all = getSocialData();
    const items = all[socialCurrentDate] || [];

    $("#social-date-label").textContent = socialCurrentDate === getToday() ? "Today" : socialCurrentDate;

    let html = "";
    let totalDur = 0, doneCount = 0, failCount = 0;
    items.forEach((item, idx) => {
      const dur = parseTime(item.to) - parseTime(item.from);
      totalDur += dur > 0 ? dur : 0;
      const statusSymbol = item.status === "done" ? "‚úÖ" : item.status === "fail" ? "‚ùå" : "‚Äî";
      if (item.status === "done") doneCount++;
      if (item.status === "fail") failCount++;
      html += `<tr>
        <td>${item.name}</td>
        <td>${item.from} ‚Äì ${item.to}</td>
        <td style="text-align:right">${dur}</td>
        <td style="text-align:center">
          <button class="social-mark" data-idx="${idx}" data-set="done" title="Mark as Done">‚úÖ</button>
          <button class="social-mark" data-idx="${idx}" data-set="fail" title="Mark as Fail">‚ùå</button>
          &nbsp;${statusSymbol}
        </td>
        <td>
          <button class="social-delete" data-idx="${idx}" title="Delete Entry">‚úï</button>
        </td>
      </tr>`;
    });
    $("#social-list").innerHTML = html;
    $("#social-sum-min").textContent = totalDur;
    $("#social-success").textContent = doneCount ? `‚úÖ ${doneCount}` : "";
    $("#social-fail").textContent = failCount ? `‚ùå ${failCount}` : "";
    const total = items.length;
    $("#social-perc").textContent = total > 0 ? ` (${Math.round(doneCount * 100 / total)}% success)` : "";
  }

  $("#social-add-form").onsubmit = e => {
    e.preventDefault();
    const name = $("#social-name").value.trim();
    const from = $("#social-from").value;
    const to = $("#social-to").value;
    if (!name || !from || !to) {
      alert("Please fill out all fields");
      return;
    }
    const all = getSocialData();
    all[socialCurrentDate] = all[socialCurrentDate] || [];
    all[socialCurrentDate].push({ name, from, to, status: "" });
    saveSocialData(all);
    e.target.reset();
    renderSocial(socialCurrentDate);
  };

  $("#social-list").addEventListener("click", e => {
    if (e.target.matches(".social-mark")) {
      const idx = parseInt(e.target.dataset.idx);
      const set = e.target.dataset.set;
      const all = getSocialData();
      if (all[socialCurrentDate] && all[socialCurrentDate][idx]) {
        all[socialCurrentDate][idx].status = set;
        saveSocialData(all);
        renderSocial(socialCurrentDate);
      }
    }
    if (e.target.matches(".social-delete")) {
      const idx = parseInt(e.target.dataset.idx);
      const all = getSocialData();
      if (all[socialCurrentDate] && all[socialCurrentDate][idx]) {
        all[socialCurrentDate].splice(idx, 1);
        saveSocialData(all);
        renderSocial(socialCurrentDate);
      }
    }
  });

  $("#social-prev-date").onclick = () => {
    const d = new Date(socialCurrentDate);
    d.setDate(d.getDate() - 1);
    renderSocial(d.toISOString().slice(0, 10));
  };
  $("#social-next-date").onclick = () => {
    const d = new Date(socialCurrentDate);
    d.setDate(d.getDate() + 1);
    renderSocial(d.toISOString().slice(0, 10));
  };

  renderSocial();

  // Reset button clears all data
  $("#reset-btn").onclick = () => {
    if (confirm("Are you sure you want to reset all your data? This action cannot be undone.")) {
      localStorage.clear();
      location.reload();
    }
  };
});
</script>
</body>
</html>
